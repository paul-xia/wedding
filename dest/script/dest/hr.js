/*
@ project:wedding
@ date:2015-05-24
@ author:Paul Xia
*/
!function(a,b,c,d){function e(b){b=a.extend({afterShow:null},b);var c=a("#lightbox");return c.length||(c=a('<div class="lightbox" id="lightbox"></div>').appendTo("body")),{close:function(){c.hide()},remove:function(){c.remove()},show:function(){c.show()},pop:c}}var f=a("#mainWrapper"),g=a("#navBar"),h=g.offset().top,i=[];g.find("a").each(function(){var b=a(a(this).attr("href"));i.push({top:b.offset().top,tag:a(this),targetDom:b})}),g.on("click","a",function(){var b=a(a(this).attr("href"));return d.stop(!0,!1).animate({scrollTop:b.offset().top-52},200),!1}),a("#showTimeBtn").on("click",function(){var b=this,c=new e;this.timer=setTimeout(function(){c.remove()},5e3),c.pop.mcalendar({firstDay:1,weeks:["日","一","二","三","四","五","六"],todayTemp:"今",monthChange:function(){c.pop.find("#p-2015-05-21").addClass("current")}}),c.pop.css({left:a(this).offset().left,top:a(this).offset().top+45}),c.pop.hover(function(){clearTimeout(b.timer)},function(){b.timer=setTimeout(function(){c.remove()},3e3)})}),b.on("scroll",function(){var c=b.scrollTop();if(a("title").text(c),c>h){f.addClass("nav-bar-float");for(var d=0;d<i.length;d++)if(i[d+1]){if(c>i[d].top&&c<i[d+1].top){i[d].tag.addClass("on").siblings().removeClass("on");break}c>i[i.length-1].top&&i[i.length-1].tag.addClass("on").siblings().removeClass("on")}}else f.removeClass("nav-bar-float"),i[0].tag.addClass("on").siblings().removeClass("on")}).scroll()}(jQuery,$(window),$(document),$("html, body"));